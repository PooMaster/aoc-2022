<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>main.py</title>
  <link rel="stylesheet" href="../../pycco.css">
</head>
<body>
<div id='container'>
  <div id="background"></div>
  <div class='section'>
    <div class='docs'><h1>main.py</h1></div>
  </div>
  <div class='clearall'>
  <div class='section' id='section-0'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-0'>#</a>
      </div>
      <h3>Part 1:</h3>
<p>&mdash; Day 2: Rock Paper Scissors &mdash;</p>
<p>The Elves begin to set up camp on the beach. To decide whose tent gets to be
closest to the snack storage, a giant Rock Paper Scissors tournament is already
in progress.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">Enum</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">NamedTuple</span><span class="p">,</span> <span class="n">TextIO</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-1'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-1'>#</a>
      </div>
      <p>Rock Paper Scissors is a game between two players. Each game contains many
rounds; in each round, the players each simultaneously choose one of Rock,
Paper, or Scissors using a hand shape.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-2'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-2'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">class</span> <span class="nc">Move</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
    <span class="n">rock</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">paper</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">scissors</span> <span class="o">=</span> <span class="mi">3</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-3'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-3'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">class</span> <span class="nc">Round</span><span class="p">(</span><span class="n">NamedTuple</span><span class="p">):</span>
    <span class="n">my_move</span><span class="p">:</span> <span class="n">Move</span>
    <span class="n">their_move</span><span class="p">:</span> <span class="n">Move</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-4'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-4'>#</a>
      </div>
      <p>Then, a winner for that round is
selected: Rock defeats Scissors, Scissors defeats Paper, and Paper defeats
Rock. If both players choose the same shape, the round instead ends in a draw.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="n">winning_combos</span> <span class="o">=</span> <span class="p">{</span>
    <span class="p">(</span><span class="n">Move</span><span class="o">.</span><span class="n">rock</span><span class="p">,</span> <span class="n">Move</span><span class="o">.</span><span class="n">scissors</span><span class="p">),</span>
    <span class="p">(</span><span class="n">Move</span><span class="o">.</span><span class="n">scissors</span><span class="p">,</span> <span class="n">Move</span><span class="o">.</span><span class="n">paper</span><span class="p">),</span>
    <span class="p">(</span><span class="n">Move</span><span class="o">.</span><span class="n">paper</span><span class="p">,</span> <span class="n">Move</span><span class="o">.</span><span class="n">rock</span><span class="p">),</span>
<span class="p">}</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-5'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-5'>#</a>
      </div>
      <p>Appreciative of your help yesterday, one Elf gives you an <strong>encrypted strategy
guide</strong> (your puzzle input) that they say will be sure to help you win. &ldquo;The
first column is what your opponent is going to play: <code>A</code> for Rock, <code>B</code> for
Paper, and <code>C</code> for Scissors. The second column&ndash;&rdquo; Suddenly, the Elf is called
away to help with someone&rsquo;s tent.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="n">their_move_decode</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="n">Move</span><span class="o">.</span><span class="n">rock</span><span class="p">,</span>
    <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="n">Move</span><span class="o">.</span><span class="n">paper</span><span class="p">,</span>
    <span class="s2">&quot;C&quot;</span><span class="p">:</span> <span class="n">Move</span><span class="o">.</span><span class="n">scissors</span><span class="p">,</span>
<span class="p">}</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-6'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-6'>#</a>
      </div>
      <p>The second column, you reason, must be what you should play in response: <code>X</code>
for Rock, <code>Y</code> for Paper, and <code>Z</code> for Scissors. Winning every time would be
suspicious, so the responses must have been carefully chosen.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="n">my_move_decode</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;X&quot;</span><span class="p">:</span> <span class="n">Move</span><span class="o">.</span><span class="n">rock</span><span class="p">,</span>
    <span class="s2">&quot;Y&quot;</span><span class="p">:</span> <span class="n">Move</span><span class="o">.</span><span class="n">paper</span><span class="p">,</span>
    <span class="s2">&quot;Z&quot;</span><span class="p">:</span> <span class="n">Move</span><span class="o">.</span><span class="n">scissors</span><span class="p">,</span>
<span class="p">}</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-7'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-7'>#</a>
      </div>
      <p>The winner of the whole tournament is the player with the highest score. Your
<strong>total score</strong> is the sum of your scores for each round. The score for a
single round is the score for the <strong>shape you selected</strong> (1 for Rock, 2 for
Paper, and 3 for Scissors) plus the score for the <strong>outcome of the round</strong> (0
if you lost, 3 if the round was a draw, and 6 if you won).</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-8'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-8'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">class</span> <span class="nc">RoundResult</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
    <span class="n">loss</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">draw</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">win</span> <span class="o">=</span> <span class="mi">6</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-9'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-9'>#</a>
      </div>
      <p>Since you can&rsquo;t be sure if the Elf is trying to help you or trick you, you
should calculate the score you would get if you were to follow the strategy
guide.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-10'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-10'>#</a>
      </div>
      <p>For example, suppose you were given the following strategy guide:</p>
<pre><code>A Y
B X
C Z
</code></pre>
<p>This strategy guide predicts and recommends the following:</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">test_part1</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-11'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-11'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-12'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-12'>#</a>
      </div>
      <blockquote>
<p>In the first round, your opponent will choose Rock (A), and you should
  choose Paper (Y). This ends in a win for you with a score of 8 (2
  because you chose Paper + 6 because you won).</p>
</blockquote>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">assert</span> <span class="n">score_round</span><span class="p">(</span><span class="n">decode_round</span><span class="p">(</span><span class="s2">&quot;A Y&quot;</span><span class="p">))</span> <span class="o">==</span> <span class="mi">8</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-13'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-13'>#</a>
      </div>
      <blockquote>
<p>In the second round, your opponent will choose Paper (B), and you should
  choose Rock (X). This ends in a loss for you with a score of 1 (1 + 0).</p>
</blockquote>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">assert</span> <span class="n">score_round</span><span class="p">(</span><span class="n">decode_round</span><span class="p">(</span><span class="s2">&quot;B X&quot;</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-14'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-14'>#</a>
      </div>
      <blockquote>
<p>The third round is a draw with both players choosing Scissors, giving
  you a score of 3 + 3 = 6.</p>
</blockquote>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">assert</span> <span class="n">score_round</span><span class="p">(</span><span class="n">decode_round</span><span class="p">(</span><span class="s2">&quot;C Z&quot;</span><span class="p">))</span> <span class="o">==</span> <span class="mi">6</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-15'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-15'>#</a>
      </div>
      <p>In this example, if you were to follow the strategy guide, you would get a total
score of <code>15</code> (8 + 1 + 6).</p>
<p><strong>What would your total score be if everything goes exactly according to your
strategy guide?</strong></p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-16'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-16'>#</a>
      </div>
      <h3><span id="part-1-solution:" href="part-1-solution:"> Part 1 Solution: </span></h3>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="n">MoveDecoder</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Move</span><span class="p">]</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-17'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-17'>#</a>
      </div>
      <p>Parse and decode the round info from a strategy guide line using the given
move decoder tables.</p>
<pre><code>&gt;&gt;&gt; decode_round("A Y")
Round(my_move=&lt;Move.paper: 2&gt;, their_move=&lt;Move.rock: 1&gt;)
</code></pre>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">decode_round</span><span class="p">(</span>
    <span class="n">round_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">their_move_decode</span><span class="p">:</span> <span class="n">MoveDecoder</span> <span class="o">=</span> <span class="n">their_move_decode</span><span class="p">,</span>
    <span class="n">my_move_decode</span><span class="p">:</span> <span class="n">MoveDecoder</span> <span class="o">=</span> <span class="n">my_move_decode</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Round</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-18'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-18'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">their_move_str</span><span class="p">,</span> <span class="n">my_move_str</span> <span class="o">=</span> <span class="n">round_str</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">Round</span><span class="p">(</span>
        <span class="n">my_move</span><span class="o">=</span><span class="n">my_move_decode</span><span class="p">[</span><span class="n">my_move_str</span><span class="p">],</span>
        <span class="n">their_move</span><span class="o">=</span><span class="n">their_move_decode</span><span class="p">[</span><span class="n">their_move_str</span><span class="p">],</span>
    <span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-19'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-19'>#</a>
      </div>
      <p>Return the result of the given RPS round.</p>
<pre><code>&gt;&gt;&gt; decide_round(Round(their_move=Move.rock, my_move=Move.paper))
&lt;RoundResult.win: 6&gt;
</code></pre>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">decide_round</span><span class="p">(</span><span class="nb">round</span><span class="p">:</span> <span class="n">Round</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RoundResult</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-20'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-20'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span><span class="nb">round</span><span class="o">.</span><span class="n">my_move</span><span class="p">,</span> <span class="nb">round</span><span class="o">.</span><span class="n">their_move</span><span class="p">)</span> <span class="ow">in</span> <span class="n">winning_combos</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">RoundResult</span><span class="o">.</span><span class="n">win</span>

    <span class="k">if</span> <span class="p">(</span><span class="nb">round</span><span class="o">.</span><span class="n">their_move</span><span class="p">,</span> <span class="nb">round</span><span class="o">.</span><span class="n">my_move</span><span class="p">)</span> <span class="ow">in</span> <span class="n">winning_combos</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">RoundResult</span><span class="o">.</span><span class="n">loss</span>

    <span class="k">return</span> <span class="n">RoundResult</span><span class="o">.</span><span class="n">draw</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-21'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-21'>#</a>
      </div>
      <p>Return the total score given by this round.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">score_round</span><span class="p">(</span><span class="nb">round</span><span class="p">:</span> <span class="n">Round</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-22'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-22'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">return</span> <span class="nb">round</span><span class="o">.</span><span class="n">my_move</span><span class="o">.</span><span class="n">value</span> <span class="o">+</span> <span class="n">decide_round</span><span class="p">(</span><span class="nb">round</span><span class="p">)</span><span class="o">.</span><span class="n">value</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-23'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-23'>#</a>
      </div>
      <p>Calculate the total score that would result if the given strategy guide
was accurate.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">part1</span><span class="p">(</span><span class="nb">input</span><span class="p">:</span> <span class="n">TextIO</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-24'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-24'>#</a>
      </div>
      <h3>Part 2:</h3>
<p>The Elf finishes helping with the tent and sneaks back over to you. &ldquo;Anyway, the
second column says how the round needs to end: <code>X</code> means you need to lose, <code>Y</code>
means you need to end the round in a draw, and <code>Z</code> means you need to win. Good
luck!&rdquo;</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">score_round</span><span class="p">(</span><span class="n">decode_round</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()))</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">input</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-25'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-25'>#</a>
      </div>
      <p>The total score is still calculated in the same way, but now you need to figure
out what shape to choose so the round ends as indicated.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="n">intended_result_decode</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;X&quot;</span><span class="p">:</span> <span class="n">RoundResult</span><span class="o">.</span><span class="n">loss</span><span class="p">,</span>
    <span class="s2">&quot;Y&quot;</span><span class="p">:</span> <span class="n">RoundResult</span><span class="o">.</span><span class="n">draw</span><span class="p">,</span>
    <span class="s2">&quot;Z&quot;</span><span class="p">:</span> <span class="n">RoundResult</span><span class="o">.</span><span class="n">win</span><span class="p">,</span>
<span class="p">}</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-26'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-26'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-27'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-27'>#</a>
      </div>
      <p>The example above now goes like this:</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">test_part2</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-28'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-28'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-29'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-29'>#</a>
      </div>
      <blockquote>
<p>In the first round, your opponent will choose Rock (<code>A</code>), and you need
  the round to end in a draw (<code>Y</code>), so you also choose Rock. This gives
  you a score of 1 + 3 = <strong>4</strong>.</p>
</blockquote>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">assert</span> <span class="n">score_round</span><span class="p">(</span><span class="n">decode_round_with_result</span><span class="p">(</span><span class="s2">&quot;A Y&quot;</span><span class="p">))</span> <span class="o">==</span> <span class="mi">4</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-30'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-30'>#</a>
      </div>
      <blockquote>
<p>In the second round, your opponent will choose Paper (<code>B</code>), and you
  choose Rock so you lose (<code>X</code>) with a score of 1 + 0 = <strong>1</strong>.</p>
</blockquote>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">assert</span> <span class="n">score_round</span><span class="p">(</span><span class="n">decode_round_with_result</span><span class="p">(</span><span class="s2">&quot;B X&quot;</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-31'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-31'>#</a>
      </div>
      <blockquote>
<p>In the third round, you will defeat your opponent&rsquo;s Scissors with Rock
  for a score of 1 + 6 = <strong>7</strong>.</p>
</blockquote>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">assert</span> <span class="n">score_round</span><span class="p">(</span><span class="n">decode_round_with_result</span><span class="p">(</span><span class="s2">&quot;C Z&quot;</span><span class="p">))</span> <span class="o">==</span> <span class="mi">7</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-32'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-32'>#</a>
      </div>
      <p>Now that you&rsquo;re correctly decrypting the ultra top secret strategy guide, you
would get a total score of <strong>12</strong>.</p>
<p>Following the Elf&rsquo;s instructions for the second column, <strong>what would your total
score be if everything goes exactly according to your strategy guide?</strong></p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-33'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-33'>#</a>
      </div>
      <h3><span id="part-2-solution:" href="part-2-solution:"> Part 2 Solution: </span></h3>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-34'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-34'>#</a>
      </div>
      <p>I decided to solve part 2 in a way that maximizes the reuse of work from part 1.
The parsing function knows the round result but throws it away since part 1&rsquo;s
round scoring function has to determine it anyway.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="n">ResultDecoder</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">RoundResult</span><span class="p">]</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-35'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-35'>#</a>
      </div>
      <p>Parse and decode the move and result info from a strategy guide line and
return the round that produces the intended result.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">decode_round_with_result</span><span class="p">(</span>
    <span class="n">strat_str</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">their_move_decode</span><span class="p">:</span> <span class="n">MoveDecoder</span> <span class="o">=</span> <span class="n">their_move_decode</span><span class="p">,</span>
    <span class="n">intended_result_decode</span><span class="p">:</span> <span class="n">ResultDecoder</span> <span class="o">=</span> <span class="n">intended_result_decode</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Round</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-36'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-36'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">their_move_str</span><span class="p">,</span> <span class="n">intended_result_str</span> <span class="o">=</span> <span class="n">strat_str</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="n">their_move</span> <span class="o">=</span> <span class="n">their_move_decode</span><span class="p">[</span><span class="n">their_move_str</span><span class="p">]</span>
    <span class="n">intended_result</span> <span class="o">=</span> <span class="n">intended_result_decode</span><span class="p">[</span><span class="n">intended_result_str</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">my_move</span> <span class="ow">in</span> <span class="n">Move</span><span class="p">:</span>
        <span class="n">considered_round</span> <span class="o">=</span> <span class="n">Round</span><span class="p">(</span><span class="n">my_move</span><span class="o">=</span><span class="n">my_move</span><span class="p">,</span> <span class="n">their_move</span><span class="o">=</span><span class="n">their_move</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">decide_round</span><span class="p">(</span><span class="n">considered_round</span><span class="p">)</span> <span class="ow">is</span> <span class="n">intended_result</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">considered_round</span>

    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;No moves lead to the intended result&quot;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-37'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-37'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">part2</span><span class="p">(</span><span class="nb">input</span><span class="p">:</span> <span class="n">TextIO</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">score_round</span><span class="p">(</span><span class="n">decode_round_with_result</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()))</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">input</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-38'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-38'>#</a>
      </div>
      <p>Print out part 1 solution</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;input.txt&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">puzzle_input</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Part 1:&quot;</span><span class="p">,</span> <span class="n">part1</span><span class="p">(</span><span class="n">puzzle_input</span><span class="p">))</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-39'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-39'>#</a>
      </div>
      <p>Print out part 2 solution</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;input.txt&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">puzzle_input</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Part 2:&quot;</span><span class="p">,</span> <span class="n">part2</span><span class="p">(</span><span class="n">puzzle_input</span><span class="p">))</span>

</pre></div>
    </div>
  </div>
  <div class='clearall'></div>
</div>
</body>
